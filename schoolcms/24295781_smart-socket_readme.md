## smart-socket [![996.icu](https://img.shields.io/badge/link-996.icu-red.svg)](https://996.icu) 
smart-socketæ˜¯ä¸€æ¬¾å›½äº§å¼€æºçš„Java AIOæ¡†æ¶ï¼Œæ”¯æŒ TPCã€UDPã€SSL/TLSï¼Œè¿½æ±‚ä»£ç é‡ã€æ€§èƒ½ã€ç¨³å®šæ€§ã€æ¥å£è®¾è®¡å„æ–¹é¢éƒ½è¾¾åˆ°æè‡´ã€‚
å¦‚æœsmart-socketå¯¹æ‚¨æœ‰ä¸€ä¸å¸®åŠ©ï¼Œè¯·Starä¸€ä¸‹æˆ‘ä»¬çš„é¡¹ç›®å¹¶æŒç»­å…³æ³¨ï¼›
å¦‚æœæ‚¨å¯¹smart-socketå¹¶ä¸æ»¡æ„ï¼Œé‚£è¯·å¤šä¸€äº›è€å¿ƒï¼Œsmart-socketä¸€ç›´åœ¨åŠªåŠ›å˜å¾—æ›´å¥½ã€‚

**æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šé€æ¸å‘å¸‚åœºæ¨å‡ºä¸€äº›å•†ä¸šåŒ–äº§å“ï¼Œæœ‰éœ€è¦çš„ä¸ªäººæˆ–ä¼ä¸šå¯å…³æ³¨[è¿™é‡Œ](http://u.720life.cn/g/794be49a28e6f6b6aa755de579be43d95acfd5661e7af82513e920f7a2307edaeeb298617c486a8a543fe945434c75bd)**

**å®˜æ–¹QQç¾¤ï¼š** 172299083ğŸˆµ ã€**830015805**ï¼ˆå…¥ç¾¤æ¡ä»¶ï¼š***Staræœ¬é¡¹ç›®***ï¼ŒéæŠ€æœ¯äººå‘˜è¯·å‹¿æ‰°ï¼Œæ„Ÿè°¢ï¼‰

## æœ¬ç¾¤ä¸¥è°¨å¹¿å‘Šæ¨é”€ï¼Œè¯·æŸäº‘çš„é”€å”®æœ‹å‹å‹¿æ‰°ï¼Œç»™æŠ€æœ¯äººå‘˜ç•™ä¸€ç‰‡å‡€åœŸã€‚ä½ ä»¬å‘çš„å¹¿å‘Šæˆ‘ä¼šåœ¨ç¬¬ä¸€æ—¶é—´æ¸…ç†å¹¶å°†ä½ è¯·å‡ºå»ï¼Œæ‰€ä»¥çœŸçš„æ²¡å¿…è¦ã€‚
## å› æ·±å—æŸäº‘å¹¿å‘Šéªšæ‰°ï¼Œè°ƒæ•´ä¸‹å…¥ç¾¤è§„åˆ™ï¼š
- ä½¿ç”¨smart-socketçš„ç”¨æˆ·ï¼šè¯·åœ¨[issues](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6ed58d661652530124bc457132b64b3143fce518cb63220304ff899d25d2f8d66f1d0d83b4106c39ab8441a82aa156f5a9)ä¸­å®Œæˆæ¡ˆä¾‹ç™»è®°ï¼Œå¹¶åœ¨åŠ ç¾¤ï¼š830015805 æ—¶åé¦ˆ( **å¦‚æœªä½¿ç”¨smart-socketè€Œç™»è®°æ— æ•ˆæ¡ˆä¾‹ï¼Œå…¥ç¾¤ç”³è¯·ä¸äºˆé€šè¿‡** )ã€‚
- å­¦ä¹ smart-socketçš„ç”¨æˆ·ï¼šä»˜è´¹å…¥ç¾¤ï¼š172299083ï¼Œå¾…ç¡®è®¤ä¸ºçœŸå®ç”¨æˆ·åå¯æ‰¾ç¾¤ä¸»é€€è´¹ï¼Œé”€å”®æœ‹å‹å…¥æ­¤ç¾¤æ¦‚ä¸é€€è´¹ã€‚

### Feature
1. æºç ï¼šä»£ç é‡æå°‘ï¼Œå¯è¯»æ€§å¼ºã€‚æ ¸å¿ƒä»£ç ä»… 1600 è¡Œå·¦å³ï¼Œå·¥ç¨‹ç»“æ„ã€åŒ…è·¯å¾„å±‚æ¬¡æ¸…æ™°ã€‚
2. å­¦ä¹ ï¼šå­¦ä¹ é—¨æ§›ä½ï¼ŒäºŒæ¬¡å¼€å‘åªéœ€å®ç° 2 ä¸ªæ¥å£ï¼ˆProtocolã€MessageProcessorï¼‰ã€‚å…·å¤‡é€šä¿¡å¼€å‘ç»éªŒçš„å‡ ä¹æ— å­¦ä¹ æˆæœ¬ï¼Œæ ¹æ®ä½œè€…ç»éªŒæ¥çœ‹å¤§å®¶æ™®éé¢ä¸´çš„å›°éš¾åœ¨äº"é€šä¿¡åè®®"çš„æ¦‚å¿µç†è§£ä»¥åŠç¼–è§£ç å®ç°ï¼Œè€Œéé€šä¿¡æ¡†æ¶æœ¬èº«ã€‚
3. ä½¿ç”¨ï¼šé€šè¿‡å†…å­˜æ± ï¼ˆbufferPoolï¼‰æŠ€æœ¯ä»¥åŠèƒŒå‹ï¼ˆback-pressureï¼‰æœºåˆ¶ï¼Œæ—¢èƒ½å……åˆ†å‘æŒ¥æœºå™¨æ€§èƒ½ï¼Œåˆèƒ½ä¿è¯æœåŠ¡è¿è¡Œç¨³å®šæ€§ã€‚
4. æœåŠ¡ï¼šæä¾›ä¸°å¯Œçš„æ’ä»¶å¼æœåŠ¡ï¼ŒåŒ…æ‹¬ï¼šSSL/TLSé€šä¿¡æ’ä»¶ã€å¿ƒè·³æ’ä»¶ã€æ–­é“¾é‡è¿æ’ä»¶ã€æœåŠ¡æŒ‡æ ‡ç»Ÿè®¡æ’ä»¶ã€é»‘åå•æ’ä»¶ã€å†…å­˜æ± ç›‘æµ‹æ’ä»¶ã€‚

### äº¤æµäº’åŠ©
å¦‚æœæ‚¨åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ç¢°åˆ°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢å‡ ä¸ªé€”å¾„å¯»æ±‚å¸®åŠ©ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿé¼“åŠ±èµ„æ·±ç”¨æˆ·ç»™æ–°äººæä¾›å¸®åŠ©ã€‚

- åŠ å…¥QQç¾¤ï¼š830015805 æˆ– Emailï¼šzhengjunweimail@163.comã€‚
- [å¼€æºé—®ç­”](http://u.720life.cn/g/1dbc517b01e71dde51eaf55b6f5fa83387d0b98cc5171fc0b7e222dfc1e6a2c50dc66587dadcf23f227f3053a3979174e2dcfbef9a95b73289cb9388d528e56a)
- é€šè¿‡ [Issue](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6ed58d661652530124bc457132b64b31433a867bbbba267defa62d9a75d182d39e) æŠ¥å‘Š bug æˆ–è¿›è¡Œå’¨è¯¢ã€‚
- æäº¤ [Pull Request](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6ed58d661652530124bc457132b64b3143dc25dc45bfecdccf8e3461144579e78f) æ”¹è¿› smart-socket çš„ä»£ç ã€‚
- åœ¨å¼€æºä¸­å›½å‘è¡¨smart-socketç›¸å…³çš„æŠ€æœ¯æ€§æ–‡ç« ã€‚

### å¼€æºç”Ÿæ€
1. [smart-http](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6ed58d661652530124bc457132b64b3143a6008072a7816e73dd2ffa64327da886) å›½å†…é¦–æ¬¾åŸºäºsmart-socketå®ç°çš„HttpæœåŠ¡å™¨
2. [irtu-gps](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6eed20161f1a25cbfff027a89b65f3bd04e0702ae1d0774a37555d8fa967b18d7d) åŸºäºiRTUé¡¹ç›®,å®ç°GPSæ•°æ®çš„æ¥æ”¶å’Œå±•ç¤º
> å¦‚æœæ‚¨çš„é¡¹ç›®ä¸­ä½¿ç”¨äº† smart-socket å¹¶æ„¿æ„åœ¨æ­¤å¤„å±•ç°ç»™å¤§ä¼—ï¼Œæ¬¢è¿ç•™è¨€åé¦ˆã€‚

### ä¼ä¸šç”¨æˆ·
***è™šå¸­ä»¥å¾…***
> å¦‚æœæ‚¨æ‰€åœ¨çš„å…¬å¸ä½¿ç”¨äº† smart-socket å¹¶æ„¿æ„åœ¨æ­¤å¤„å±•ç°ç»™å¤§ä¼—ï¼Œæ¬¢è¿ç•™è¨€åé¦ˆã€‚æ ¼å¼ï¼šå…¬å¸å+é¡¹ç›®ç®€è¿°

### æ„Ÿè°¢
- æ„Ÿè°¢ç äº‘æä¾›çš„ä»£ç æ‰˜ç®¡å’Œ Pages æœåŠ¡ã€‚
- æ„Ÿè°¢ JetBrains ä¸º smart-socket æä¾›çš„ IDEA Licenseã€‚
- æ„Ÿè°¢ä¸º smart-socket [æèµ ](http://u.720life.cn/g/00bca85b20f9bd0746368088830cdea8e0b77ed61e8b8fea3027f24e9881102506dd12b0366b403d8956d728e813a2e7)çš„æ¯ä¸€ä½æœ‹å‹ã€‚
- æ„Ÿè°¢æ­£åœ¨ä½¿ç”¨åŠä¸º smart-socket ä½œæ¨å¹¿çš„æœ‹å‹ã€‚

## æ€§èƒ½æµ‹è¯•
- ç¯å¢ƒå‡†å¤‡
    1. æµ‹è¯•é¡¹ç›®ï¼š[smart-http](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6ed58d661652530124bc457132b64b3143a6008072a7816e73dd2ffa64327da886) 
    2. é€šä¿¡åè®®ï¼šHttp
    3. å‹æµ‹å·¥å…·ï¼š[wrk](http://u.720life.cn/g/54145d0471d91890860f7f8463c03046464a5aa8cbd55579ff7878924e84a6e5)
    4. æµ‹è¯•æœºï¼šMacBook Pro, 2.9Ghz i5, 4æ ¸8Gå†…å­˜
    5. æµ‹è¯•å‘½ä»¤ï¼š
    ```
    wrk -H 'Host: 10.0.0.1' -H 'Accept: text/plain,text/html;q=0.9,application/xhtml+xml;q=0.9,application/xml;q=0.8,*/*;q=0.7' -H 'Connection: keep-alive' --latency -d 15 -c 1024 --timeout 8 -t 4 http://127.0.0.1:8080/plaintext -s pipeline.lua -- 16
    ```
- æµ‹è¯•ç»“æœï¼šsmart-socketçš„æ€§èƒ½è¡¨ç°åŸºæœ¬ç¨³å®šç»´æŒåœ¨ 100MB/s å·¦å³ã€‚

    |  è¿æ¥æ•°  | Requests/sec   |  Transfer/sec  |
    | -- | -- | -- |
    | 512 | 775909.66 | 108.03MB|
    | 1024 | 748988.74 | 104.29MB|
    | 2048 | 728809.24 | 101.48MB|
    | 4096 | 732603.27 | 102.01MB|

### å‚è€ƒæ–‡çŒ®
- https://jfarcand.wordpress.com/2008/11/25/tricks-and-tips-with-aio-part-1-the-frightening-thread-pool/
- https://webtide.com/on-jdk-7-asynchronous-io/
- https://www.cnblogs.com/sandea/p/9094863.html

### å…³äºä½œè€…
Edit By ä¸‰åˆ€  
E-mail:zhengjunweimail@163.com  
Update Date: 2019-11-07


 # è‰¯å¿ƒå‹æƒ…é“¾æ¥

[è…¾è®¯QQç¾¤å¿«é€Ÿæ£€ç´¢](http://u.720life.cn/s/8cf73f7c)

[è½¯ä»¶å…è´¹å¼€å‘è®ºå›](http://u.720life.cn/s/bbb01dc0)

# ç‰ˆæƒå£°æ˜ 

æœ¬æ–‡ç”±è‰¯å¿ƒå·¥ä½œå®¤æ•´ç† æ¬¢è¿åŠ å…¥[å®˜æ–¹äº¤æµQç¾¤](https://u.720life.cn/s/f2316816)è°ˆåˆä½œ

[æœ¬æ–‡è½¬è‡ªå¦‚ä¸‹é“¾æ¥](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6ef0e6b2f44c8d0b80f0c874aea02d018c6ca95b4a95dc4274b3087610326c6e37e0bd06c96b2f3befb01a867a935af011)