# DUXCMS 2.1
[![LICENSE](https://img.shields.io/badge/license-Anti%20996-blue.svg)](https://github.com/996icu/996.ICU/blob/master/LICENSE)
[![Build Status](https://travis-ci.org/xiaodit/duxcms-2.1.svg?branch=master)](https://travis-ci.org/xiaodit/duxcms-2.1)
[![Release](https://img.shields.io/github/v/release/xiaodit/duxcms-2.1.svg?style=flat)](https://github.com/xiaodit/duxcms-2.1/releases/latest)
[![Scrutinizer Code Quality](https://scrutinizer-ci.com/g/xiaodit/duxcms-2.1/badges/quality-score.png?b=master)](https://scrutinizer-ci.com/g/xiaodit/duxcms-2.1/?branch=master)
[![HitCount](http://hits.dwyl.io/{username}/xiaodit/duxcms-21.svg)](http://hits.dwyl.io/{username}/xiaodit/duxcms-21)

[æœ€æ–°ç‰ˆæœ¬](http://u.720life.cn/g/54145d0471d91890860f7f8463c03046d3cf0513b86d7c9c6e6134c25e1b776671e4a8e02f3b8156580cba805545b219fe50af67e9d6e194e889317bca2a4a58)

é»˜è®¤æ²¡æœ‰å‰å°æ¨¡æ¿çš„ï¼Œè¯·ä¸‹è½½[å®˜æ–¹ä»“åº“](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6e4a9e32b86ab90e186a79ef141906d45094bdbe0159c9d4166bcc56f75e7c605421f106676b6abe689195f16b17469c7a)æ¨¡æ¿æ–‡ä»¶è¿›è¡Œå¼€å‘  

æ²¡å®‰è£…Composerï¼Ÿ è¯·åœ¨æœ€æ–°ç‰ˆæœ¬é“¾æ¥ä¸‹æ‰¾`DuxCMS_Full.zip`ä¸‹è½½

* `DuxCMS_Full.zip` å«composeråŒ…çš„å®Œæ•´ç¨‹åº å»ºè®®é¦–æ¬¡ä¸‹è½½
* `DuxCMS-update.zip` æä¾›ç»™åœ¨çº¿æ›´æ–°çš„å¢é‡æ›´æ–°åŒ…

**æ­¤é¡¹ç›®åªæ˜¯æ–¹ä¾¿è‡ªå·±å¹³æ—¶åšç§å•é¡¹ç›®é¡ºä¾¿å…±äº«ç»™å…¶å®ƒäººç”¨ï¼Œ ä¸ä¼šé¢‘ç¹åœ°æ·»åŠ æ–°åŠŸèƒ½**

## ç‰¹å¾
* æ”¯æŒphp 5.6+ 7.4-
* [æ”¯æŒå¤šè¯­è¨€](#å¤šè¯­è¨€)
* [æ·»åŠ å¸¸ç”¨åˆ¤æ–­æ ‡ç­¾](#æ ‡ç­¾)
* [æä¾›æ›´ç¨³å®šçš„åˆ†è¯æœåŠ¡](#åˆ†è¯åŠŸèƒ½)
* [æä¾›æ–‡ç« æ¨é€ç™¾åº¦æ”¶å½•](#ç™¾åº¦æ¨é€)
* [æä¾›æ›´å¥½çš„å¼‚å¸¸æ¥ç®¡ï¼ˆWhoopsï¼‰](http://u.720life.cn/g/8428c54a615a10bbf1f082879d49f7e511e515ac9f681a8fb6033300f7d467815dd6cbcb6f0f06798bcfa406a1118931)
* [æä¾›å¤šæ¡ä»¶ç­›é€‰](#å¤šæ¡ä»¶ç­›é€‰)
* [æä¾›åœ¨çº¿æ›´æ–°æœåŠ¡(å¢é‡æ›´æ–°)](#åœ¨çº¿æ›´æ–°) ğŸš€
* æä¾›ç½‘ç«™åœ°å›¾ç”Ÿæˆ
* [æä¾›apiæ¥å£è°ƒç”¨](#api-è°ƒç”¨)

## å®‰è£…
* mysqliæ‰©å±•å¿…é¡»å®‰è£…
* pdoæ‰©å±•å¯é€‰å®‰è£…
```sh
$ composer install
```

## é¢„è§ˆ
[çº¿ä¸Šé¢„è§ˆ](http://u.720life.cn/g/7f70da87553afd6a11af80e3fb66f631681cfa75b87f129c1e0bdf81d7f17ac8)  
æ„Ÿè°¢ ğŸ‘‰[foxhost](http://u.720life.cn/g/8e973567eb4fed83acc959d0cf8fd126efd2592cfc03815a36ee21db3ff3ec87f41fdb1e5726950efef67d1d94d193e1)ğŸ‘ˆæä¾›å…è´¹æœåŠ¡å™¨æ”¯æŒ

## æ•°æ®åº“é©±åŠ¨
* mysqli
* pdo

## å‚è€ƒæ¨¡æ¿
[GITEE](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6e4a9e32b86ab90e186a79ef141906d45094bdbe0159c9d4166bcc56f75e7c605421f106676b6abe689195f16b17469c7a)  
[å¼€å‘æ–‡æ¡£](http://u.720life.cn/g/251b87a01595c66786e97402b49737e5615cefe692db3bfddaedbde9ee8c5bb3)

## å¤šè¯­è¨€

### æ·»åŠ è¯­ç§
[åœ¨æ­¤æ–‡ä»¶](http://u.720life.cn/g/54145d0471d91890860f7f8463c03046d3cf0513b86d7c9c6e6134c25e1b7766c2ddad28ba76c6daa8d1dd735d4635fdd23549c0ecd7c354b4a9d3eff154c2d9cbd0a1c164d6055662c61c47cf2f3ac8)æ·»åŠ å…¶å®ƒè¯­ç§

### å¼€å¯è¯­è¨€
1. åå°è®¾ç½®->å¤šè¯­è¨€è®¾ç½®->å¼€å¯
2. é€‰æ‹©é»˜è®¤è¯­è¨€

### åˆ‡æ¢è¯­è¨€
#### å‰å°åˆ‡æ¢
```php
// åˆ‡æ¢è‹±æ–‡
http://www.domain.com/en-us

// åˆ‡æ¢ä¸­æ–‡
http://www.domain.com/zh-cn
```
#### å‰å°è·å–è¯­è¨€é…ç½®
æ¨¡æ¿è°ƒç”¨ `$lang_list` è·å–åˆ—è¡¨

```php
 
```

å…·ä½“ç”¨æ³•
```html
 
 $vo}-->
    {$vo.label}  
 
 
```

## ç™¾åº¦æ¨é€
* æ¨¡æ¿ä½¿ç”¨ ` `
* åå°å®æ—¶æäº¤ ç³»ç»Ÿè®¾ç½®->ç™¾åº¦é“¾æ¥æäº¤->å¼€å¯


## å°åŠŸèƒ½
### æ ç›®é¡µ
* æ·»åŠ åˆ†ç±»æ–‡ç« ç»Ÿè®¡ï¼ˆæ”¯æŒé¢‘é“ã€åˆ—è¡¨ï¼‰ `$categoryInfo['article_count']`

## åŠ©æ‰‹å‡½æ•°
* `hasSub($cid)` æ˜¯å¦æœ‰ä¸‹çº§åˆ†ç±»
* `articleSumByCid(int $cid, $positionId = '', $isShow = true)` è·å–åˆ†ç±»æ–‡ç« ç»Ÿè®¡
* `isOdd($index)` æ˜¯å¦ä¸ºå¥‡æ•° ä¾‹å­ ` å•æ•°  å¶æ•° `

## æ ‡ç­¾
| æ ‡ç­¾ | è¯´æ˜| å‚æ•° | ä¾‹å­
| ----|----|----|----
| empty | æ•°ç»„ä¸ºç©ºæ—¶| name | `{empty name="$list"}{/empty}`
| noempty | æ•°ç»„ä¸ä¸ºç©ºæ—¶ | name | `{noempty name="$list"}{/noempty}`
| defined | å¸¸é‡å·²å®šä¹‰æ—¶ | name | `{defined name="APP_NAME"}{/defined}`
| nodefined | å¸¸é‡æœªå®šä¹‰æ—¶ | name | `{nodefined name="APP_NAME"}{/nodefined}`
| isset | å˜é‡å®šä¹‰æ—¶ | name | `{isset name="$test"}{/isset}`
| noset | å˜é‡æœªå®šä¹‰æ—¶ | name | `{noset name="$test"}{/noset}`
| between | å˜é‡å­˜åœ¨æŸä¸ªåŒºé—´æ—¶ | name, value | `{between name="$test" value="1,2"}{/between}`
| nobetween | å˜é‡ä¸å­˜åœ¨æŸä¸ªåŒºé—´æ—¶ | name, value | `{nobetween name="$test" value="1,2"}{/nobetween}`
| in | å˜é‡å­˜åœ¨æ•°ç»„æ—¶ | name, value | `{in name="$test" value="1,2"}{/in}`
| noin | å˜é‡ä¸å­˜åœ¨æ•°ç»„æ—¶ | name, value | `{noin name="$test" value="1,2"}{/noin}`
| page | å•é¡µä¿¡æ¯| class åˆ†ç±»id, id è°ƒç”¨çš„å˜é‡å | `{page class="$class_id" id="page"}{$page.content}{/page}`
| progress | è·å–æ–‡ç« é˜…è¯»è¿›åº¦ | container, parent, child, class | [è¯¦ç»†è¯´æ˜](#æ–‡ç« é˜…è¯»è¿›åº¦)

### æ–‡ç« é˜…è¯»è¿›åº¦
å‚æ•°
* `container` åŒ…ç€æ–‡ç« å†…å®¹çš„æ ¹ ï¼ˆid, classï¼‰ ä¾‹å¦‚ .back-to-top
* `parent` åŒ…ç€ç™¾åˆ†æ¯”çš„æ ¹ï¼ˆid, classï¼‰ ä¾‹å¦‚ .back-to-top
* `child` åŒ…ç€ç™¾åˆ†æ¯”çš„æ ‡ç­¾ ä¾‹å¦‚ span
* `class` å½“é¡µé¢æµè§ˆåˆ°æ–‡ç« å†…å®¹å†…ï¼ŒåŠ çš„ç±»å ä¾‹å¦‚ on
```
   
    æ–‡ç« å†…å®¹
   
  {progress container=".g-bd" parent=".back-to-top" child="span" class="on"}
     
        
     
  {/progress}
```
## åˆ†è¯åŠŸèƒ½
ç”±äºhttp://keyword.discuz.com å‡ºç°403(åº”è¯¥å…³æœåŠ¡äº†)

ä½¿ç”¨[@æ¢æ–Œpenny](http://u.720life.cn/g/7233e45c492e5f3d09dc161393e23f001af0fc5c12d16f42a73f92a53235c947)çš„åˆ†è¯æœåŠ¡, ä½¿ç”¨æ­¤é¡¹ç›®çš„'æ¨¡æ¿å·¥'ä»¬ï¼Œä½ ä»¬åº”è¯¥æ„Ÿè°¢æ¢å‚é•¿ï¼

## å¤šæ¡ä»¶ç­›é€‰

### åå°
1. åå°åˆ›å»ºæ‰©å±•æ¨¡å‹ 
2. æ·»åŠ ã€ä¸‹æ‹‰èœå•ã€‘ç±»å‹çš„å­—æ®µï¼Œ ã€å­—æ®µé…ç½®ã€‘ç”¨é€—å·åˆ†éš” ä¾‹å¦‚åˆ›å»ºä¸€ä¸ªç æ•°çš„å­—æ®µ å­—æ®µé…ç½®ï¼šm,xl,xxl

### å‰å°
`$duowei`æ•°ç»„  
`$v['selected']`å½“å‰å±æ€§æ˜¯å¦å·²é€‰æ‹©  
`$v['url']` å½“å‰å±æ€§çš„url ç›¸å½“äº ä½¿ç”¨å½“å‰å±æ€§è¿›è¡Œç­›é€‰  
`$v['durl']` å½“å‰å±æ€§çš„url ç›¸å½“äº ä¸ä½¿ç”¨å½“å‰å±æ€§è¿›è¡Œç­›é€‰  
```
 
   
     
       {$vo.name} 
      {noempty name="$vo['child']"}
       
         
           
             
              {$v.name}
             
           

           
             
              {$v.name}
             
           
          
       
      {/noempty}
     
   
    
```

## ä¼ªé™æ€ è§„åˆ™
* åˆ—è¡¨é¡µ `urlname` æ ç›®URL
* åˆ—è¡¨è¯¦æƒ…é¡µ `class_urlname` ä¸Šçº§åˆ†ç±»æ ç›®URL `urltitle` å½“å‰é¡µURL
* å•é¡µé¢ `urlname` å½“å‰é¡µURL  

|åç§° | è§„åˆ™ | å¯¹åº”ç±»| ä¾‹å­|
|----|----|----|----|
|åˆ—è¡¨é¡µ|` `|`article/Category/index`|`' /index.html' => 'article/Category/index'`
|åˆ—è¡¨è¯¦æƒ…é¡µ|` ` ` `|`article/Content/index`|`' / .html' => 'article/Content/index'`
|å•é¡µé¢|` `|`page/Category/index`|`'page/ .html' => 'page/Category/index'`

## api è°ƒç”¨

GET `/api.php`

**æ³¨æ„åŒºåˆ†å¤§å°å†™**  

| å‚æ•° | è¯´æ˜(å‚æ•°èŒƒå›´)| æ˜¯å¦å¿…ä¼  | 
| ----|----|----|
| signature |  ç­¾å | æ˜¯ |
| timestamp |  æ—¶é—´æˆ³ | æ˜¯ |
| nonce | éšæœºå­—ç¬¦ä¸²| æ˜¯ |
| app |  ['DuxCms', 'Article']| æ˜¯ |
| label | ['contentList', 'categoryList', 'tagsList'] | æ˜¯ |
| ... | å…¶å®ƒæŸ¥è¯¢å‚æ•°ï¼Œä¸æ™®é€šæ¨¡æ¿æ ‡ç­¾ä¸€æ · | å¦ |

ç­¾åç”Ÿæˆå‚è€ƒ
```
$params = [
  time(),   // timestamp å‚æ•°å€¼
  rand(1, 99999),   // nonce å‚æ•°å€¼
  'DuxCms', // app å‚æ•°å€¼
  'categoryList' // label å‚æ•°å€¼
];
sort($params, SORT_STRING);
$tmpStr = implode( $params );
$sign = sha1( $tmpStr );
```

## åœ¨çº¿æ›´æ–°
ä¸ºäº†ä¸å½±å“å·²æœ‰çš„æ–‡ä»¶ï¼Œä½œäº†å¢é‡æ›´æ–°åŒ…ã€‚  
æ›´æ–°æœåŠ¡é»˜è®¤ä¸‹è½½releasesçš„Duxcms-update.zipå‹ç¼©åŒ…ï¼Œè¿›è¡Œç¨‹åºå‡çº§ã€‚  
[æ›´æ–°æœåŠ¡](http://u.720life.cn/g/54145d0471d91890860f7f8463c03046d3cf0513b86d7c9c6e6134c25e1b7766ffcdc6fdc1ae6ca011321357820ef295)  
[æ£€æµ‹åœ°å€](http://u.720life.cn/g/bb9e19de933fd87f05600116164183c0b3ddd62d3854e3432c88c12f9e59c662f1b5ca3b769773bd22db366804c312e9cfd8c21ef0cddc1773f48759707a5ebc936359677d6560950448d53eda4d814d)





 # è‰¯å¿ƒå‹æƒ…é“¾æ¥

[è…¾è®¯QQç¾¤å¿«é€Ÿæ£€ç´¢](http://u.720life.cn/s/8cf73f7c)

[è½¯ä»¶å…è´¹å¼€å‘è®ºå›](http://u.720life.cn/s/bbb01dc0)

# ç‰ˆæƒå£°æ˜ 

æœ¬æ–‡ç”±è‰¯å¿ƒå·¥ä½œå®¤æ•´ç† æ¬¢è¿åŠ å…¥[å®˜æ–¹äº¤æµQç¾¤](https://u.720life.cn/s/f2316816)è°ˆåˆä½œ

[æœ¬æ–‡è½¬è‡ªå¦‚ä¸‹é“¾æ¥](http://u.720life.cn/g/2e71d0f0a5c601172267ba20d3a43c6ef129717bcf0a54e9d92815c9cd6a421144a68de8db0f96d3f3a36b4a8acc2a51c18ff2c12d41349bc5babe2e3528050d)